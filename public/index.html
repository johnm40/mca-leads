<!DOCTYPE html>
<html>
<head>
  <title>MCA Lead Finder</title>
  <style>
    body { background:#0d1117; color:white; font-family:Arial; }
    .box { background:#161b22; padding:15px; margin:10px 0; border-radius:6px; border-left:4px solid gold; }
    input,select,button { padding:10px; margin:5px; border-radius:4px; border:none; }
    button { background:gold; cursor:pointer; }
  </style>
</head>
<body>

<h1>Free MCA Lead Finder</h1>

<input id="keyword" placeholder="industry (e.g. contractor, restaurant)">
<select id="state">
 <option value="">All States</option>
 <option>NY</option><option>CA</option><option>TX</option><option>FL</option> 
 <!-- add more later -->
</select>

<button onclick="search()">Find Leads</button>

<div id="results"></div>

<script>
async function search() {
  const keyword = document.getElementById("keyword").value;
  const state = document.getElementById("state").value;
  
  const res = await fetch(`/search?keyword=${keyword}&state=${state}`);
  const data = await res.json();

  document.getElementById("results").innerHTML = data.map(b => `
    <div class="box">
      <b>${b.name}</b><br>
      ğŸ“ ${b.address}<br>
      ğŸ“ ${b.phone}<br>
      ğŸŒ ${b.website || 'N/A'}<br>
      ğŸ‘¤ Owner: ${b.owner || 'N/A'}<br>
      ğŸ’° Revenue: ${b.revenue || 'N/A'}<br>
      ğŸ“… Filed: ${b.filing_date || 'N/A'}<br>
      <button onclick='saveLead(${JSON.stringify(b)})'>Save Lead</button>
    </div>
  `).join("");
}

async function saveLead(lead) {
  await fetch("/save", {method:"POST", headers:{'Content-Type':'application/json'}, body:JSON.stringify(lead)});
  alert("Saved âœ…");
}
</script>

</body>
</html>
